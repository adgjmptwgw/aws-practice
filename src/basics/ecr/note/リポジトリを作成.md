# 概要
コンソール上で「リポジトリ」を実施する際の各種項目を解説する。

# 前提知識
## レジストリとは
- レポジトリ（イメージ）を保存するもの
- パブリックレジストリ / プライベートレジストリ がAWSアカウントにつき、それぞれ1つずつ存在する。

![image](https://github.com/adgjmptwgw/aws-practice/assets/66456130/6964a0a5-2536-418e-97c7-fbefa8002452)


## 運用方法
ECRのリポジトリにPushする際はCodeBuildと連携する事が多い。  
ソースコード（Dockerfile等）をGitにPushした後、CodeBuildのbuildspec.ymlファイルに従って、イメージ（Dockerfile）をECSへ自動的にPushする。

# 手順
## 一般設定
### 可視性設定
- プライベート
- パブリック
コンテナイメージを誰でも世界中に公開し、ダウンロードすることが可能になる。

### タグのイミュータビリティ
この設定を「有効」にするとリポジトリのバージョンを上書きできなくなる。つまり。「latest」のタグを使用できない。  
そもそもバージョンを「latest」で運用する事は推奨されていない。  
ソースコードとコンテナイメージの一貫性の把握が容易になり、トラブルシューティング時に無駄な時間を使うことが減るため、「タグのイミュータビリティ」設定は「有効」に設定した方が良い。
バージョンはGitの「コミットID」と紐付けする事が多い。　　  

[**バージョン管理について**](https://dev.classmethod.jp/articles/docker-image-tag-git-commit-id-by-codebuild/)

## 暗号化設定
### KMS 暗号化
TBD
