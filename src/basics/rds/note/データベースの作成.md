# 概要
コンソール上で「データベースを作成」を実施する際の各種項目を解説する。  

# 前提知識
## Auroraの構成
Auroraは下記の構成となっている。  
- プライマリーインスタンス（ロール：ライターインスタンス）  
書き込みと読み取りができるインスタンス
- リードレプリカ （ロール：リーダーインスタンス） 
読み取りのみ行うインスタンス。プライマリーインスタンスが停止した際はこちらがバックアップとして、プライマリーインスタンスに昇格する。
- インスタンスボリューム（ロール：リージョン別クラスター）  
書き込みと読み込みができるインスタンスとデータを管理するクラスターボリュームが分離されている。

![image](https://github.com/adgjmptwgw/aws-practice/assets/66456130/87f1c7ac-3f4b-44e4-a62a-7c31b34146fc)

## RDS Proxy
### 接続プーリング
同時接続に伴うオーバーヘッドを削減できる。RDSとLambdaは相性が悪く、RDSの同時接続数に関係なくリクエストが来た分処理を実行する為、RDSの同時接続数が上限に達し、Lambdaでエラーとなってしまう事がある。  
RDS Proxyを経由させると、RDSの同時接続数を軽減できる。
RDS Proxyは、RDS データベースインスタンスに確立した接続のプールを管理し、新しい接続が確立する際に通常発生するデータベースコンピューティングおよびメモリリソースを減らすことができる。（使いまわして、接続数を節約する）  

**<RDS　Proxy プーリングの仕組み>**  
![image](https://github.com/adgjmptwgw/aws-practice/assets/66456130/80cbc838-bfd1-438a-af94-c36d6949b709)  

**<RDS　Proxy を経由した際のDB接続数比較>**  
![image](https://github.com/adgjmptwgw/aws-practice/assets/66456130/139b11a9-050b-496a-b565-f75a47becb46)  

**<参考資料>**  
[RDS同時接続数の上限](https://kakkoyakakko2.hatenablog.com/entry/aws/aurora/max-connections)


### 接続プーリング



# 手順
## 追加設定
### 暗号化
- 暗号を有効化  
AWS Well-Architected のベストプラクティスでは有効に設定するのが推奨されている。　
**<メリット>**  
- データが暗号化され、セキュリティーが高まる。
**<デメリット>**  
- m3.medium 以上のインスタンスタイプを設定する必要がある。たぶん・・・

### バックアップ  
- バックアップ保持期間
S3に自動バックアップされる。
