# 概要
コンソール上で「予算を作成」を実施する際の各種項目を解説する。

# 前提知識
## AWS Budgetsとは
想定外の料金が発生した場合に早期に気付くことができるサービス。  
料金を監視して、アラートを出すことができる。料金の閾値や期間は任意に設定できる。

## Savings Plans
1 年または 3 年の時間単位で、使用するコンピュートリソースを予約する。使用してもしなくても予約した分のコンピューティングリソース分の料金は発生する。
その代わりにオンデマンド料金と比較して最大 72% の請求額の削減ができる。

## リザーブドインスタンス（RI）
- Savings Plans と似ているが、微妙に違う。  
- TBD  

**参考記事**  
- [Saving PlansとRIの違い](https://cloudnavi.nhn-techorus.com/archives/1738)

### カバレッジ率
Savings Plans / RI において、これらのプランでどれだけのリソースをカバーできているかの割合。  
例えば、実際のEC2インスタンスのコンピューティングリソースの使用量が10000円分でSavings Plans / RI プランで20000円分契約していたら、カバー率200%となる？？？？  
※Savings Plansを勉強してから正しい情報に更新しますが、上記の例はざっくり雰囲気はあっています。
その為、カバレッジ率は高ぎるとSavings Plansの料金を過剰に支払いしており、低すぎると追加でSavings Plansの契約をした方が良い。 

# 各項目解説
## 予算タイプ
### コスト予算
推奨されている基本の予算タイプ。単にある期間内に予算が閾値の値に達するとメール、SNS、チャットを送信する。

### 使用量予算
RDS、RedShift、EC2，S3、OpenSearchを使用単位で監視する。  
例えば、EC2の場合、「EC2 - EBS」「EC2 - Elastic IP」「EC2 - NAT Gateway」等の区切りで料金を監視できる。

### Savings Plans の予算
Savings Plansの予算を監視して、使用率が低いかどうか確認できる。使用率が低い場合、Savings Plansが過剰な契約になっている。

### 予約予算
リザーブドインスタンス（RI）の予算を監視して、使用率が低いかどうか確認できる。使用率が低い場合、RIが過剰な契約になっている。

## 「コスト予算」の設定
### ● 予算の範囲
- コストの集計基準
  - 非ブレンドコスト
    - 支払う金額そのまま表示する。（実数値）
    - 1年に一度 Reserved Instance （RI） を購入する際、一時的に購入月の請求額が大きくなるが、そのまま表示される。
    - Cost Explorerのデフォルトはこの項目を使用している。
  - 償却コスト
    - 償却コスト = 非ブレンドコスト（通常の毎月の利用料金） + 前払いRI/SPの償却分
    - リザーブドインスタンス（RI）やSP（Saving Plans）を1月に購入した場合、1月の請求分が大きく表示されず、各月に分散された料金が表示される。（Taxは1月分のみ大きく表示されてしまう）
  - ブレンドコスト（参考地）
    - SP/RI適用を含めた平均時間単価から算出したコスト（参考値）
    - Organizations の一括請求全体の平均使用コストを反映
      - 例えばS3は1か月あたりの保存料が多ければ多いほど、割引される。「Organizations の一括請求（コンソリデーティッドビリング）」を使用すると、組織に所属する全てのAWSアカウントの合計の使用ストレージ容量が適用される為、安くなる。
      - 上記の割引後の価格で表示するのが、ブレンドコスト（[**AWS公式：参考の計算式**](https://docs.aws.amazon.com/ja_jp/awsaccountbilling/latest/aboutv2/con-bill-blended-rates.html#Blended_CB)）
    - [**AWS Organizations の一括請求機能**](https://github.com/adgjmptwgw/aws-practice/blob/main/src/basics/organizations/note/%E3%83%A1%E3%83%A2.md#organizations-%E3%81%AE%E4%B8%80%E6%8B%AC%E8%AB%8B%E6%B1%82%E6%A9%9F%E8%83%BD) を使用する場合はこちらを使用する。


