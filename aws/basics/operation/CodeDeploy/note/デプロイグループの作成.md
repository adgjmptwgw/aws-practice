# 概要
コンソール上で「デプロイグループの作成」を実施する際の各種項目を解説する。

# 各種設定項目解説
## デプロイ設定
### トラフィックの再ルーティング
- Blue/Greenデプロイの過程で、Green側のECS等のタスク作成が完了した時点で、すぐにGreen側のタスクへルーティングを切り替えるかどうか設定できる
- 自分の任意のタイミングで再ルーティングさせたい場合、この設定で切り替えタイミングを伸ばす等の対応を行う。

**<参考資料>**  
- [**トラフィックの再ルーティングについて**](https://dev.classmethod.jp/articles/20220422-codedeploy-bg-cli/)

### 元のリビジョンの終了
- Blue/Greenデプロイが完了し、切替前に使用していたECSのタスクを何時間後に終了させるか設定できる。
- もし、新しいタスクに問題があった場合にすぐにロールバックできるよう、切替前タスクの停止時間を設定する。

<img src="https://github.com/adgjmptwgw/infra-note/assets/66456130/d71a6845-e520-4d74-b31d-7363b3bbe543" width="80%">

## トリガー
「デプロイ失敗」「デプロイ停止」等のイベントが発生した際にAmazon SNSを使用して通知が可能。

## ロールバック
「ロールバックを無効にする」を選択すると、自動ロールバックが実施されない。手動にてロールバックを行う必要がある。「ロールバックを無効にする」にチェックを入れない場合、下記の自動ロールバック設定をする必要がある。

- デプロイが失敗したときにロールバックする
- アラームのしきい値が一致したときにロールバックする
